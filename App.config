<?xml version="1.0" encoding="utf-8"?>
<configuration>

	<configSections>
		<section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
	</configSections>

	<!-- Startup -->
	<startup>
		<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.8"/>
	</startup>

	<!-- Connection Strings -->
	<connectionStrings>
		<add name="DefaultConnection"
			 connectionString="Server=localhost;Port=3306;Database=dialysis_db;Uid=dialysis_user;Pwd=Dialysis@2026;SslMode=none;AllowUserVariables=True;UseAffectedRows=False;CharSet=utf8mb4;"
			 providerName="MySql.Data.MySqlClient"/>
	</connectionStrings>

	<!-- App Settings -->
	<appSettings>
		<!-- Generale -->
		<add key="AppName" value="Dialysis Management System"/>
		<add key="AppVersion" value="1.0.0"/>
		<add key="DebugMode" value="false"/>

		<!-- Database -->
		<add key="DatabaseProvider" value="MySQL"/>
		<add key="DatabaseBackupPath" value="Backups"/>
		<add key="EnableAutoBackup" value="true"/>
		<add key="BackupScheduleTime" value="02:00"/>
		<add key="BackupRetentionDays" value="30"/>

		<!-- Sicurezza -->
		<add key="EncryptionKey" value="YourSecure32CharEncryptionKey!!"/>
		<add key="EncryptionIV" value="YourSecure16IV!!"/>
		<add key="EncryptAttachments" value="true"/>
		<add key="SessionTimeoutMinutes" value="30"/>
		<add key="PasswordMinLength" value="8"/>
		<add key="MaxFailedLoginAttempts" value="5"/>
		<add key="LockoutDurationMinutes" value="30"/>
		<add key="RequirePasswordChange" value="false"/>
		<add key="PasswordExpiryDays" value="90"/>

		<!-- Audit -->
		<add key="EnableAuditLog" value="true"/>
		<add key="AuditLogRetentionDays" value="90"/>
		<add key="LogUserActions" value="true"/>

		<!-- Cloud Storage -->
		<add key="CloudStorageEnabled" value="false"/>
		<add key="CloudProvider" value="GoogleDrive"/>
		<add key="GoogleDriveClientId" value=""/>
		<add key="GoogleDriveClientSecret" value=""/>
		<add key="OneDriveClientId" value=""/>
		<add key="DropboxAccessToken" value=""/>
		<add key="FTPServer" value=""/>
		<add key="FTPUsername" value=""/>
		<add key="FTPPassword" value=""/>

		<!-- Files -->
		<add key="MaxFileUploadSizeMB" value="50"/>
		<add key="AllowedFileExtensions" value=".pdf,.jpg,.jpeg,.png,.dcm,.doc,.docx,.xls,.xlsx"/>
		<add key="AttachmentsPath" value="Data\Attachments"/>

		<!-- Reports -->
		<add key="ReportsPath" value="Reports"/>
		<add key="TempPath" value="Temp"/>
		<add key="DefaultReportFormat" value="PDF"/>

		<!-- UI -->
		<add key="DefaultCulture" value="it-IT"/>
		<add key="DateFormat" value="dd/MM/yyyy"/>
		<add key="DateTimeFormat" value="dd/MM/yyyy HH:mm"/>
		<add key="TimeFormat" value="HH:mm"/>
		<add key="EnableAutoComplete" value="true"/>
		<add key="GridPageSize" value="50"/>

		<!-- Notifiche -->
		<add key="EnableEmailNotifications" value="false"/>
		<add key="SMTPServer" value="smtp.gmail.com"/>
		<add key="SMTPPort" value="587"/>
		<add key="SMTPUsername" value=""/>
		<add key="SMTPPassword" value=""/>
		<add key="SMTPEnableSSL" value="true"/>
		<add key="EmailFrom" value="noreply@dialisi.it"/>

		<!-- Alert -->
		<add key="EnableAlerts" value="true"/>
		<add key="AlertLabValuesOutOfRange" value="true"/>
		<add key="AlertExamsExpiring" value="true"/>
		<add key="AlertExamExpiryDays" value="30"/>
		<add key="AlertMaintenanceDue" value="true"/>
		<add key="AlertMaintenanceDays" value="7"/>

		<!-- Export -->
		<add key="ExportCSVDelimiter" value=";"/>
		<add key="ExportEncoding" value="UTF-8"/>

		<!-- Performance -->
		<add key="EnableCaching" value="true"/>
		<add key="CacheDurationMinutes" value="10"/>
		<add key="DatabaseCommandTimeout" value="30"/>
	</appSettings>

	<!-- Runtime -->
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-4.0.1.2" newVersion="4.0.1.2"/>
			</dependentAssembly>
		</assemblyBinding>
	</runtime>

	<!-- System.Data -->
	<system.data>
		<DbProviderFactories>
			<remove invariant="MySql.Data.MySqlClient"/>
			<add name="MySQL Data Provider"
				 invariant="MySql.Data.MySqlClient"
				 description=".Net Framework Data Provider for MySQL"
				 type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=8.0.33.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/>
		</DbProviderFactories>
	</system.data>

</configuration>
